"use strict";var __read=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},jsx_runtime_1=(Object.defineProperty(exports,"__esModule",{value:!0}),require("react/jsx-runtime")),react_1=require("react"),RadioButton_style_1=require("./RadioButton.style"),aphrodite_1=require("../../helpers/aphrodite"),important_1=require("../../helpers/aphrodite/important"),Button_1=__importDefault(require("../Button"));function RadioButton(r){var n=r.renderItem,t=r.onChange,e=void 0===(e=r.direction)?"left":e,o=void 0===(o=r.error)?"":o,a=void 0===(a=r.type)?"primary":a,i=void 0===(i=r.className)?"":i,u=void 0===(s=r.size)?"base":s,s=void 0===(s=r.bgAlpha)?80:s,l=(m=__read((0,react_1.useState)(r.defaultKey||r.value),2))[0],c=m[1],o=(m=__read((0,react_1.useState)(o),2))[0],d=m[1],_=(0,react_1.useRef)(null),p=(0,RadioButton_style_1.useStyles)({type:a,direction:e,errorText:o,size:u,bgAlpha:s}),f=(0,react_1.useCallback)(function(e){e&&(t&&r.options&&t(e,r.options[e]),c(e),d(""))},[t,r.options]),v=(0,react_1.useCallback)(function(e){e.target instanceof HTMLButtonElement&&(e=null==(e=e.target.dataset)?void 0:e.value,f(e))},[f]),m=((0,react_1.useEffect)(function(){d(r.error||"")},[r.error]),(0,react_1.useEffect)(function(){r.value&&Object.keys(r.options||{}).some(function(e){return e.toLowerCase()==(null==(e=null==(e=r.value)?void 0:e.toString())?void 0:e.toLowerCase())})&&c(r.value)},[r.value,r.options]),(0,react_1.useEffect)(function(){var e;if(r.keyEvents)return e=function(e){e.target instanceof HTMLElement&&_.current&&e.target.contains(_.current)&&e.stopPropagation()},document.addEventListener("keyup",e),function(){return document.removeEventListener("keyup",e)}},[r.keyEvents]),(0,react_1.useEffect)(function(){var e;l||(e=Object.keys(r.options||{})[0],c(e))},[l,r.options]),(0,react_1.useMemo)(function(){return Object.keys(r.options||{}).map(function(e){var t=null==(t=r.options)?void 0:t[e];return t?n?n(t,e):(0,jsx_runtime_1.jsx)(Button_1.default,{value:e,type:"light",size:u,active:e==l,className:"".concat((0,important_1.css)(p.radioButton,e==l?p.activeRadio:null)),onClick:v,children:"label"in t?t.label:e},e):null})},[r.options,n,u,l,p.radioButton,p.activeRadio,v]));return r.options&&0!=Object.keys(r.options).length?(0,jsx_runtime_1.jsxs)("div",{ref:_,className:"".concat((0,aphrodite_1.css)(p.container)," ").concat(i),style:r.style,"data-testid":r.id,id:r.id,"data-name":r.name,"data-value":l,children:[r.name&&l?(0,jsx_runtime_1.jsx)("input",{readOnly:!0,name:r.name,type:"hidden",value:l.toString()}):null,m,o?(0,jsx_runtime_1.jsx)("span",{className:(0,aphrodite_1.css)(p.errorFeedback),children:o}):null]}):null}exports.default=RadioButton;