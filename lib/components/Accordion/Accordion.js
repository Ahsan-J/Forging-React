"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var l=Object.getOwnPropertyDescriptor(t,i);l&&("get"in l?t.__esModule:!l.writable&&!l.configurable)||(l={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,l)}:function(e,t,i,r){e[r=void 0===r?i:r]=t[i]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return __setModuleDefault(t,e),t},__read=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,l,o=i.call(e),n=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)n.push(r.value)}catch(e){l={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(l)throw l.error}}return n},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_this=this,jsx_runtime_1=(Object.defineProperty(exports,"__esModule",{value:!0}),require("react/jsx-runtime")),react_1=__importStar(require("react")),useSlots_1=require("../../hooks/useSlots"),Collapse_1=__importDefault(require("../Collapse")),AccordionTitle_1=__importDefault(require("./AccordionTitle")),aphrodite_1=require("../../helpers/aphrodite"),Accordion_styles_1=require("./Accordion.styles"),Accordion=react_1.default.memo(function(o){var n=(0,useSlots_1.useSlots)(o.children,"data-accordion"),c=(delete n.children,(0,Accordion_styles_1.useStyles)()),e=__read((0,react_1.useState)([]),2),a=e[0],r=e[1],s=o.renderCustomTitle,l=o.onAccordionCollapse,e=o.className,e=void 0===e?"":e,u=((0,react_1.useEffect)(function(){var e;o.multiple?r((null==(e=o.active)?void 0:e.filter(function(e){return!!e}))||[]):r([(null==(e=null==(e=o.active)?void 0:e.filter(function(e){return e}))?void 0:e[0])||""])},[o.active,o.multiple]),(0,react_1.useCallback)(function(e){var t,i=Object.assign([],a);o.multiple?-1<(t=null==i?void 0:i.indexOf(e))?i.splice(t,1):i.push(e):i=null!=i&&i.includes(e)?[]:[e],r(i),l&&l(i.includes(e)?e.toString():"")},[a,l,o.multiple])),t=(0,react_1.useMemo)(function(){return Object.keys(n).map(function(e){var t=n[e],i=a.includes(e),r=(null==(r=o.disabled)?void 0:r.includes(e))||!1,l=s?s({key:e,active:i,disabled:r}):(0,jsx_runtime_1.jsx)(AccordionTitle_1.default,{title:e,disabled:r,active:i,className:"".concat((0,aphrodite_1.css)(c.accordionItem)," ").concat(i?(0,aphrodite_1.css)(c.activeAccordionItem):"")});return(0,jsx_runtime_1.jsx)(Collapse_1.default,{disabled:r,id:e,title:l,onCollapse:u.bind(_this,e),collapse:i,className:"".concat((0,aphrodite_1.css)(c.collapsible)),children:(0,jsx_runtime_1.jsx)("div",{className:(0,aphrodite_1.css)(c.componentContainer),children:t})},e)})},[n,c,a,o.disabled,s,u]);return Object.keys(n).length?(0,jsx_runtime_1.jsx)("div",{id:o.id,"data-testid":o.id,style:o.style,className:"".concat((0,aphrodite_1.css)(c.container)," ").concat(e),children:t}):null});exports.default=Accordion;