"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&("get"in n?t.__esModule:!n.writable&&!n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){e[a=void 0===a?r:a]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t},__read=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,l=r.call(e),c=[];try{for(;(void 0===t||0<t--)&&!(a=l.next()).done;)c.push(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return c},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},__1=(Object.defineProperty(exports,"__esModule",{value:!0}),require("..")),important_1=require("../../helpers/aphrodite/important"),react_1=__importStar(require("react")),imageviewer_style_1=__importDefault(require("./imageviewer.style")),ImageViewer=react_1.default.forwardRef(function(e,t){var r=(0,react_1.useRef)(null),a=(0,imageviewer_style_1.default)(),n=(s=__read((0,react_1.useState)([]),2))[0],l=s[1],c=(s=__read((0,react_1.useState)(0),2))[0],o=s[1],i=(0,react_1.useCallback)(function(e){return(e=n[(e=void 0===e?c:e)%n.length])?(e=(e=e.split("/"))[e.length-1],__read(e.split("."),1)[0]||e):""},[n,c]),u=(0,react_1.useMemo)(i,[i]),s=((0,react_1.useImperativeHandle)(t,function(){return{showModal:function(e,t){t&&t.length?(l(t.map(function(e){return e instanceof File?URL.createObjectURL(e):e})),null!=(t=r.current)&&t.showModal(e)):n.length&&null!=(t=r.current)&&t.showModal(e)},setActiveIndex:o,setImages:l,downloadImageAtIndex:function(e){var t;0<=(e=void 0===e?-1:e)&&n[e]&&((t=document.createElement("a")).href=n[e],t.download=i(e),t.click(),t.remove())}}},[n,i]),(0,react_1.useEffect)(function(){e.images&&e.images.length&&l(e.images.map(function(e){return e instanceof File?URL.createObjectURL(e):e}))},[e.images]),(0,react_1.useMemo)(function(){var e=n[c%n.length];return react_1.default.createElement("img",{className:(0,__1.css)(a.image),alt:i(),src:e})},[n,a,c,i]));return react_1.default.createElement(__1.Modal,{show:e.show,ref:r,className:(0,important_1.css)(a.container)},e.showHeader?react_1.default.createElement("div",{className:(0,__1.css)(a.headingWrapper)},react_1.default.createElement("h3",null,u),1<n.length?react_1.default.createElement("span",{className:"lead"},"[".concat(c," / ").concat(n.length,"]")):null):null,1<n.length?react_1.default.createElement("div",{className:(0,__1.css)(a.leftIcon)},react_1.default.createElement(__1.Icon,{onClick:function(){o(function(e){return Math.abs(e-1)%n.length})},name:"chevron-left",height:"3.5rem",width:"3.5rem",fill:"var(--bs-body-color)"})):null,react_1.default.createElement("div",{className:(0,__1.css)(a.imageContainer)},s),1<n.length?react_1.default.createElement("div",{className:(0,__1.css)(a.rightIcon)},react_1.default.createElement(__1.Icon,{onClick:function(){o(function(e){return Math.abs(e+1)%n.length})},name:"chevron-right",height:"3.5rem",width:"3.5rem",fill:"var(--bs-body-color)"})):null,e.showFooter?react_1.default.createElement("div",{className:(0,__1.css)(a.footerContainer)},react_1.default.createElement("div",{className:(0,__1.css)(a.descriptionContainer)},e.description||null),react_1.default.createElement("div",{className:(0,__1.css)(a.iconContainer)},react_1.default.createElement(__1.Icon,{onClick:function(){var e=document.createElement("a");e.href=n[c],e.download=u,e.click(),e.remove()},name:"download",height:"1.8rem",width:"1.8rem",fill:"var(--bs-body-color)",className:"m-1 p-1"}),react_1.default.createElement(__1.Icon,{onClick:function(){return window.open(n[c],"__blank")},name:"box-arrow-up-right",height:"1.8rem",width:"1.8rem",fill:"var(--bs-body-color)",className:"m-1 p-1"}))):null)});ImageViewer.defaultProps={showFooter:!0,showHeader:!0},exports.default=ImageViewer;