"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var c in r=arguments[t])Object.prototype.hasOwnProperty.call(r,c)&&(e[c]=r[c]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,r){var t={};for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&r.indexOf(c)<0&&(t[c]=e[c]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,c=Object.getOwnPropertySymbols(e);n<c.length;n++)r.indexOf(c[n])<0&&Object.prototype.propertyIsEnumerable.call(e,c[n])&&(t[c[n]]=e[c[n]]);return t},jsx_runtime_1=(Object.defineProperty(exports,"__esModule",{value:!0}),require("react/jsx-runtime")),react_1=require("react");function InfiniteList(e){var r=void 0===(s=e.data)?[]:s,t=e.renderItem,n=void 0!==(s=e.isReverse)&&s,c=e.onEndReach,s=void 0===(s=e.debounce)?1e3:s,u=void 0===(l=e.threshold)?200:l,o=e.wrapper,i=void 0!==(l=e.hasMore)&&l,a=e.page,l=__rest(e,["data","renderItem","isReverse","onEndReach","debounce","threshold","wrapper","hasMore","page"]),f=(0,react_1.useRef)(null),_=(0,react_1.useRef)(!0),p=(0,react_1.useRef)(0),d=(0,react_1.useRef)(1),g=(0,react_1.useRef)(s),h=((0,react_1.useEffect)(function(){"number"==typeof a&&0<a&&(d.current=a)},[a]),(0,react_1.useCallback)(function(e){i&&(n&&1==_.current&&e.target.scrollTop<=(u||0)&&(c&&p.current>e.target.scrollTop&&(c(e,d.current),d.current=d.current+1),0<g.current)&&(_.current=!1,setTimeout(function(){return _.current=!0},g.current)),!n&&1==_.current&&e.target.scrollHeight-e.target.scrollTop-(u||0)<=e.target.clientHeight&&(c&&p.current<e.target.scrollTop&&(c(e,d.current),d.current=d.current+1),0<g.current)&&(_.current=!1,setTimeout(function(){return _.current=!0},g.current)),p.current=e.target.scrollTop)},[n,i,u,c])),e=((0,react_1.useEffect)(function(){if(!o&&i&&f.current){var e=f.current.parentElement;if(e)return null!=e&&e.addEventListener("scroll",h),n&&null!=e&&e.scrollTo(0,null==e?void 0:e.scrollHeight),function(){null!=e&&e.removeEventListener("scroll",h)}}},[h,i,n,o]),(0,react_1.useEffect)(function(){var e;if(o&&i&&f.current)return(e=f.current).addEventListener("scroll",h),n&&e.scrollTo(0,e.scrollHeight),function(){e.removeEventListener("scroll",h)}},[i,o,h,n]),(0,react_1.useMemo)(function(){return Array.isArray(r)?r.map(function(e,r){return t?t(e,r):e}):null},[r,t]));return o?(0,react_1.createElement)(o,__assign(__assign({ref:f},l),{"data-testid":l.id}),(0,jsx_runtime_1.jsx)(jsx_runtime_1.Fragment,{children:e})):(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[(0,jsx_runtime_1.jsx)("span",{ref:f,style:{display:"none"}}),e]})}exports.default=InfiniteList;