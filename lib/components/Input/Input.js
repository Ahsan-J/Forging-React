"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},__createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&("get"in a?t.__esModule:!a.writable&&!a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t},__rest=this&&this.__rest||function(e,t){var r={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r},__read=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return s},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},jsx_runtime_1=(Object.defineProperty(exports,"__esModule",{value:!0}),require("react/jsx-runtime")),react_1=__importStar(require("react")),input_style_1=require("./input.style"),aphrodite_1=require("../../helpers/aphrodite"),Button_1=__importDefault(require("../Button")),Input=react_1.default.forwardRef(function(e,t){var r=e.label,n=e.type,n=void 0===n?"primary":n,a=e.htmlType,a=void 0===a?"text":a,i=e.labelClass,s=e.inputClass,s=void 0===s?"":s,l=e.className,l=void 0===l?"":l,o=e.size,o=void 0===o?"base":o,u=e.helpText,c=void 0===u?"":u,u=e.error,_=void 0===u?"":u,u=e.floating,u=void 0!==u&&u,e=__rest(e,["label","type","htmlType","labelClass","inputClass","className","size","helpText","error","floating"]),d=(0,react_1.useId)(),f=__read((0,react_1.useState)("password"!=a),2),p=f[0],h=f[1],f=__read((0,react_1.useState)("string"==typeof _?_:""),2),m=f[0],y=f[1],b=(0,react_1.useRef)(null),j=(0,input_style_1.useStyles)({type:n,errorText:m,placeholder:e.placeholder,size:o}),f=((0,react_1.useEffect)(function(){y("string"==typeof _?_:"")},[_]),(0,react_1.useEffect)(function(){var e,t,r;if(b.current)return e=b.current,t=function(e){"boolean"==typeof _&&0==_||y(null==(e=e.detail)?void 0:e.error)},e.addEventListener("input",r=function(){return y("")}),e.addEventListener("field-error",t),function(){e.removeEventListener("input",r),e.removeEventListener("field-error",t)}},[_]),(0,react_1.useImperativeHandle)(t,function(){return b.current},[]),(0,react_1.useMemo)(function(){return m?(0,jsx_runtime_1.jsx)("span",{className:(0,aphrodite_1.css)(j.errorFeedback),children:m}):c?(0,jsx_runtime_1.jsx)("span",{className:(0,aphrodite_1.css)(j.helpFeedback),children:c}):null},[m,c,j.errorFeedback,j.helpFeedback]));return u?(0,jsx_runtime_1.jsxs)("div",{"data-testid":e.id,id:e.id,style:e.style,className:l,children:[(0,jsx_runtime_1.jsxs)("label",{className:"".concat((0,aphrodite_1.css)(j.label,j.floatingLabel)," ").concat(i||""),htmlFor:d,children:[(0,jsx_runtime_1.jsx)("input",__assign({},e,{ref:b,className:"".concat((0,aphrodite_1.css)(j.input,j.floatingInput)," ").concat(s||""),type:p&&"password"==a?"text":a,id:d,"data-name":e.name,placeholder:e.placeholder||r})),(0,jsx_runtime_1.jsx)("span",{children:r}),"password"==a&&(0,jsx_runtime_1.jsx)(Button_1.default,{leftIcon:p?"eye-fill":"eye-slash-fill",onClick:function(){return h(function(e){return!e})}})]}),f]}):(0,jsx_runtime_1.jsxs)("div",{"data-testid":e.id,id:e.id,style:e.style,className:l,children:[r?(0,jsx_runtime_1.jsx)("label",{htmlFor:d,className:"".concat((0,aphrodite_1.css)(j.label,j.normalLabel)," ").concat(i||""),children:r}):null,(0,jsx_runtime_1.jsx)("input",__assign({},e,{id:d,"data-name":e.name,ref:b,type:p&&"password"==a?"text":a,className:"".concat((0,aphrodite_1.css)(j.input)," ").concat(s||"")})),"password"==a&&(0,jsx_runtime_1.jsx)(Button_1.default,{leftIcon:p?"eye-fill":"eye-slash-fill",onClick:function(){return h(function(e){return!e})}}),f]})});exports.default=Input;