"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&("get"in s?t.__esModule:!s.writable&&!s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,s)}:function(e,t,r,a){e[a=void 0===a?r:a]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t},__read=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,s,o=r.call(e),n=[];try{for(;(void 0===t||0<t--)&&!(a=o.next()).done;)n.push(a.value)}catch(e){s={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(s)throw s.error}}return n},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},react_1=(Object.defineProperty(exports,"__esModule",{value:!0}),__importStar(require("react"))),react_dom_1=__importDefault(require("react-dom")),__1=require(".."),aphrodite_1=require("../../helpers/aphrodite"),Toast_styles_1=__importDefault(require("./Toast.styles")),Toast=react_1.default.forwardRef(function(e,t){var r=__read((0,react_1.useState)(!!e.show),2),a=r[0],s=r[1],r=__read((0,react_1.useState)(e.title||""),2),o=r[0],n=r[1],r=__read((0,react_1.useState)(e.children),2),c=r[0],i=r[1],r=__read((0,react_1.useState)(e.autoDismissTimeout),2),u=r[0],l=r[1],r=__read((0,react_1.useState)(e.type),2),d=r[0],_=r[1],f=(0,Toast_styles_1.default)({show:a,direction:e.direction}),m=(0,react_1.useRef)(),p=(0,react_1.useRef)(null),h=(0,react_1.useRef)(null),y=(0,react_1.useRef)(0),v=(0,react_1.useRef)(0);(0,react_1.useEffect)(function(){s(!!e.show)},[e.show]),(0,react_1.useEffect)(function(){var t;window.clearTimeout(y.current),window.clearInterval(v.current),"show"in e||!a||!u||(p.current&&(t=u/50,window.clearInterval(v.current),v.current=window.setInterval(function(){var e;null!=(e=p.current)&&e.setProgress(function(e){return((e||100)/100*u-t)/u*100})},t)),y.current=window.setTimeout(function(){return s(!1)},u))},[a,e,u]),(0,react_1.useEffect)(function(){var e=document.body;m.current=m.current||document.createElement("section"),m.current.setAttribute("class",(0,aphrodite_1.css)(f.sectionWrapper)),m.current.setAttribute("data-test","ToastSectionWrapper"),m.current&&(e.className="".concat(e.className.replace((0,aphrodite_1.css)(f.body),"")," ").concat((0,aphrodite_1.css)(f.body)).trim(),e.appendChild(m.current))},[a,f]),(0,react_1.useImperativeHandle)(t,function(){return{showToast:function(e){"title"in e&&n(e.title),"body"in e&&i(e.body),"autoDismissTimeout"in e&&l(e.autoDismissTimeout),"type"in e&&_(e.type),s(!("show"in e)||e.show)}}},[]);return m.current?react_dom_1.default.createPortal(react_1.default.createElement("div",{ref:h,"data-test":"ToastContainer",onAnimationEnd:function(){var e=document.body;!a&&h.current&&(e.className=e.className.replace((0,aphrodite_1.css)(f.body),""),h.current.className=h.current.className.trim()+" show")},id:e.id,style:e.style,className:"toast show border border-".concat(d," ").concat((0,aphrodite_1.css)(f.container)," ").concat(e.className||"").trim(),role:"alert","aria-live":"assertive","aria-atomic":"true"},a&&o&&"string"==typeof o?react_1.default.createElement("div",{"data-test":"ToastHeader",className:"toast-header"},react_1.default.createElement("strong",{className:"mr-auto text-".concat(d)},o)):null,a&&o&&"string"!=typeof o?react_1.default.createElement("div",{"data-test":"ToastHeader",className:"toast-header"},o):null,a&&e.onDismiss?react_1.default.createElement(__1.Icon,{name:"x",width:"1.5rem",height:"1.5rem",className:(0,aphrodite_1.css)(f.closeBtn),onClick:e.onDismiss}):null,a&&c?react_1.default.createElement("div",{"data-test":"ToastBody",className:"toast-body"},c):null,a&&u&&e.progress?react_1.default.createElement(__1.Progress,{ref:p,"data-test":"ToastProgress",type:d,className:(0,aphrodite_1.css)(f.progress)}):null),m.current):null});Toast.defaultProps={className:"",direction:"top-right",progress:!0,autoDismissTimeout:3e3},Toast.displayName="Toast",exports.default=Toast;