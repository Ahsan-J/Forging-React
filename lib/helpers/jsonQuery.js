"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JsonObject=void 0;var regex_1=require("./regex"),JsonObject=function(){function e(e){return this.json=e,this}return e.prototype.getNestedKeys=function(e){e=null==(e=e.match(/(?:\[([\w\d-_@$]*)\])/g))?void 0:e.map(function(e){return null==(e=/\[(.*?)\]/g.exec(e))?void 0:e[1]});return null!=e&&e.length?e:[]},e.prototype.traverseData=function(e,t,r){var n=this;if(void 0!==e&&null!=e)return"object"==typeof e&&t&&t in e?null!=r&&r.length?this.traverseData(e[t],r[0],r.slice(1,r.length)):e[t]:!t&&"string"==typeof t&&Array.isArray(e)?e.map(function(e){return null!=r&&r.length?n.traverseData(e,r[0],r.slice(1,r.length)):e}).filter(function(e){return e}):t&&regex_1.numberRegex.test(t)&&Array.isArray(e)&&!e[parseInt("".concat(t))]||t&&"object"==typeof e&&!(t in e)?void 0:e},e.prototype.query=function(e,t){var r;return void 0===t&&(t=this.json),e?t&&null!=t[e]?t[e]:(r=this.getNestedKeys(e),e=null==(e=/([\w\d-_@$]+)/g.exec(e))?void 0:e[1],e=this.traverseData(t,e,r),Array.isArray(e)&&1==e.length?e[0]:Array.isArray(e)&&0==e.length?void 0:e):t},e}();exports.JsonObject=JsonObject;